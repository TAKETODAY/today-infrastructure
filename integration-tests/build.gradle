plugins {
  id 'infra.building.runtimehints-agent'
}

description = "Infra Integration Tests"

dependencies {

  testImplementation(project(":infra-webmvc-mock"))
  testImplementation project(':infra-app')
  testImplementation project(':infra-test-support')

  testImplementation project(':module:infra-app-test')
  testImplementation project(':module:infra-app-freemarker')
  testImplementation project(':module:infra-app-transaction')
  testImplementation project(":infra-web-server")
  testImplementation project(':infra-web-netty-server')

  testImplementation(project(":infra-aop"))
  testImplementation(project(":infra-beans"))
  testImplementation(project(":infra-context"))
  testImplementation(project(":infra-core"))
  testImplementation(project(":infra-starter:infra-starter-test"))

  testImplementation(testFixtures(project(":infra-aop")))
  testImplementation(testFixtures(project(":infra-beans")))
  testImplementation(testFixtures(project(":infra-core")))
  testImplementation(testFixtures(project(":infra-tx")))
  testImplementation(testFixtures(project(":infra-web")))
  testImplementation(testFixtures(project(":infra-webmvc")))
  testImplementation(testFixtures(project(":infra-test")))

  testImplementation(project(":infra-jdbc"))
  testImplementation(project(":infra-test"))
  testImplementation(project(":infra-tx"))
  testImplementation(project(":infra-web"))
  testImplementation(project(":infra-webmvc"))
  testImplementation project(':infra-websocket')
  testImplementation project(':infra-oxm')
  testImplementation(project(":infra-core-test"))
  testImplementation(project(":infra-web-client"))
  testImplementation(project(":infra-http-service"))
  testImplementation(project(":infra-web-reactive"))
  testImplementation(project(":infra-http-client"))

  testImplementation("org.apache.httpcomponents.client5:httpclient5")
  testImplementation("jakarta.inject:jakarta.inject-api")
  testImplementation("jakarta.resource:jakarta.resource-api")
  testImplementation("org.aspectj:aspectjweaver")
  testImplementation("org.hsqldb:hsqldb")
  testImplementation("org.hibernate:hibernate-core-jakarta")

  testImplementation 'jakarta.transaction:jakarta.transaction-api'
  testImplementation 'org.aspectj:aspectjrt'
  testImplementation 'jakarta.inject:jakarta.inject-api'
  testImplementation 'jakarta.annotation:jakarta.annotation-api'
  testImplementation 'org.mybatis:mybatis:3.5.9'
  testImplementation 'javax.cache:cache-api'
  testImplementation 'org.yaml:snakeyaml'
  testImplementation 'org.hibernate.validator:hibernate-validator'
  testImplementation 'org.glassfish:jakarta.el'
  testImplementation 'org.awaitility:awaitility'
  testImplementation 'org.reactivestreams:reactive-streams'
  testImplementation 'io.projectreactor:reactor-test'
  testImplementation 'io.netty:netty-codec-http'
  testImplementation 'io.projectreactor.netty:reactor-netty-http'

  testImplementation 'org.apache.httpcomponents.core5:httpcore5'
  testImplementation 'org.apache.httpcomponents.core5:httpcore5-reactive'
  testImplementation 'org.apache.httpcomponents.client5:httpclient5'
  testImplementation 'jakarta.websocket:jakarta.websocket-api'
  testImplementation "com.google.code.gson:gson"
  testImplementation 'jakarta.json.bind:jakarta.json.bind-api'

  testImplementation 'org.freemarker:freemarker'
  testImplementation 'org.eclipse:yasson'
  testImplementation 'ch.qos.logback:logback-classic'
  testImplementation("org.codehaus.janino:janino")

  testImplementation 'org.apache.derby:derby'
  testImplementation 'org.apache.derby:derbytools'

  testImplementation 'jakarta.persistence:jakarta.persistence-api'

  testImplementation 'com.mysql:mysql-connector-j'

  testImplementation 'com.github.h-thurow:simple-jndi:0.23.0'
  testImplementation 'org.apache.commons:commons-dbcp2'
  testImplementation 'com.oracle.database.jdbc:ucp'
  testImplementation 'org.hibernate.orm:hibernate-envers:6.1.4.Final'

  testImplementation 'org.apache.maven.resolver:maven-resolver-connector-basic:1.8.2'
  testImplementation 'com.zaxxer:HikariCP:5.0.0'

  testImplementation 'org.skyscreamer:jsonassert:1.5.0'
  testImplementation 'com.microsoft.sqlserver:mssql-jdbc:11.2.1.jre17'
  testImplementation 'com.h2database:h2'
  testImplementation 'org.postgresql:postgresql'
  testImplementation 'org.mariadb.jdbc:mariadb-java-client:2.7.1'
  testImplementation 'net.sourceforge.jtds:jtds:1.3.1'
  testImplementation 'org.firebirdsql.jdbc:jaybird:4.0.6.java8'

  testImplementation 'org.xerial:sqlite-jdbc:3.36.0.3'
  testImplementation 'com.ibm.db2:jcc:11.5.7.0'
  testImplementation 'org.testcontainers:jdbc:1.16.3'
  testImplementation 'org.testcontainers:cassandra'
  testImplementation 'org.testcontainers:testcontainers'
  testImplementation 'com.mchange:c3p0:0.9.5.5'
  testImplementation 'com.oracle.database.jdbc:ojdbc8'

  testImplementation(testFixtures(project(":infra-context")))
  testImplementation(testFixtures(project(":infra-core")))
  testImplementation(testFixtures(project(":infra-beans")))
  testImplementation(testFixtures(project(":infra-tx")))
  testImplementation(testFixtures(project(":infra-jcache")))
  testImplementation testFixtures(project(':infra-web-netty-server'))

  optional("com.github.librepdf:openpdf")
  optional("org.apache.poi:poi-ooxml")
  optional("com.google.code.gson:gson")
  optional("com.google.protobuf:protobuf-java-util")
  optional("com.rometools:rome")
  optional("org.freemarker:freemarker")
  optional("org.webjars:webjars-locator-core")
  optional("org.webjars:webjars-locator-lite")
  optional("com.github.librepdf:openpdf")
  optional("org.apache.poi:poi-ooxml")
  optional("org.reactivestreams:reactive-streams")
  optional("jakarta.mail:jakarta.mail-api")
  optional("org.apache.groovy:groovy-templates")
  optional 'jakarta.websocket:jakarta.websocket-api'
  optional 'jakarta.websocket:jakarta.websocket-client-api'

  testImplementation("org.apache.groovy:groovy")
  testImplementation("io.reactivex.rxjava3:rxjava")
  testImplementation("commons-io:commons-io")
  testImplementation("org.mozilla:rhino")
  testImplementation("org.dom4j:dom4j") {
    exclude group: "javax.xml.bind", module: "jaxb-api"
    exclude group: "jaxen", module: "jaxen"
    exclude group: "net.java.dev.msv", module: "xsdlib"
    exclude group: "pull-parser", module: "pull-parser"
    exclude group: "xpp3", module: "xpp3"
  }
  testImplementation("com.squareup.okhttp3:mockwebserver")
  testImplementation("org.skyscreamer:jsonassert")
  testImplementation("org.xmlunit:xmlunit-assertj")
  testImplementation("org.xmlunit:xmlunit-matchers")
  testImplementation("io.projectreactor.tools:blockhound")
  testImplementation("io.micrometer:micrometer-observation-test")
  testImplementation("io.projectreactor:reactor-core")
  testImplementation("jaxen:jaxen")
  testImplementation("org.hibernate.validator:hibernate-validator")
  testImplementation("org.skyscreamer:jsonassert")
  testImplementation("org.xmlunit:xmlunit-assertj")
  testImplementation("org.xmlunit:xmlunit-matchers")
  testImplementation("org.apache.httpcomponents.client5:httpclient5")

  testImplementation("tools.jackson.core:jackson-databind")
  testImplementation("tools.jackson.dataformat:jackson-dataformat-smile")
  testImplementation("tools.jackson.dataformat:jackson-dataformat-cbor")
  testImplementation("tools.jackson.dataformat:jackson-dataformat-smile")
  testImplementation("tools.jackson.dataformat:jackson-dataformat-xml")
  testImplementation("tools.jackson.dataformat:jackson-dataformat-yaml")

  testRuntimeOnly("org.jruby:jruby")
  testRuntimeOnly("org.python:jython-standalone")
  testRuntimeOnly("org.webjars:underscorejs")
  testRuntimeOnly("org.glassfish:jakarta.el")
  testRuntimeOnly("com.sun.xml.bind:jaxb-core")
  testRuntimeOnly("com.sun.xml.bind:jaxb-impl")
  testRuntimeOnly("com.sun.activation:jakarta.activation")

}


normalization {
  runtimeClasspath {
    ignore "META-INF/MANIFEST.MF"
  }
}
