[[cache-specific-config]]
= 配置缓存存储

Infra 的缓存抽象允许你使用各种缓存存储。
本节提供了有关配置特定缓存存储的更多详细信息。

[[cache-specific-config-caffeine]]
== Caffeine

Caffeine 是一个高性能的 Java 缓存库。
要使用 Caffeine，你需要配置 `CaffeineCacheManager`。

[source,java,indent=0,subs="verbatim,quotes"]
----
@Bean
public CacheManager cacheManager() {
    CaffeineCacheManager cacheManager = new CaffeineCacheManager("books", "authors");
    cacheManager.setCaffeine(Caffeine.newBuilder()
            .initialCapacity(100)
            .maximumSize(500)
            .expireAfterAccess(10, TimeUnit.MINUTES)
            .weakKeys()
            .recordStats());
    return cacheManager;
}
----

你可以通过提供 `Caffeine` 规范字符串来进一步自定义每个缓存。

[[cache-specific-config-ehcache]]
== Ehcache 2.x

Ehcache 是一个广泛使用的 Java 缓存。
Infra 提供了 `EhCacheCacheManager` 来支持 Ehcache 2.x。
你需要提供一个 `ehcache.xml` 配置文件。

[[cache-specific-config-redis]]
== Redis

Redis 是一个流行的内存数据结构存储。
Infra Data Redis 项目提供了 `RedisCacheManager`，它允许你使用 Redis 作为缓存存储。
你可以配置过期时间、键前缀等。

[source,java,indent=0,subs="verbatim,quotes"]
----
@Bean
public RedisCacheManager cacheManager(RedisConnectionFactory connectionFactory) {
    return RedisCacheManager.builder(connectionFactory)
        .cacheDefaults(RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofMinutes(10)))
        .build();
}
----

这使得利用 Redis 的速度和持久性功能变得容易。
