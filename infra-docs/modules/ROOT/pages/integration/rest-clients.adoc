[[rest-client]]
= REST 客户端

Infra 框架为调用 REST 端点提供了多种选择。

* `RestClient` - 一个同步的、流式的、基于功能风格的客户端。
* `WebClient` - 一个非阻塞的、响应式的客户端。
* `RestTemplate` - 一个具有模板方法 API 的同步客户端。

[[rest-client-restclient]]
== RestClient

`RestClient` 是在 Infra 6.1 中引入的，它提供了一个现代的、流式的 API 来执行 HTTP 请求。
它建立在与 `RestTemplate` 相同的基础设施之上，但提供了更符合人体工程学的 API。

[source,java,indent=0,subs="verbatim,quotes"]
----
RestClient restClient = RestClient.create();

String result = restClient.get()
  .uri("https://example.com")
  .retrieve()
  .body(String.class);
----

[[rest-client-webclient]]
== WebClient

`WebClient` 是在 Infra 5.0 中引入的，作为 WebFlux 模块的一部分。
它是一个完全非阻塞的、响应式的客户端，非常适合高并发场景。

[source,java,indent=0,subs="verbatim,quotes"]
----
WebClient webClient = WebClient.create();

Mono<String> result = webClient.get()
  .uri("https://example.com")
  .retrieve()
  .bodyToMono(String.class);
----

[[rest-client-resttemplate]]
== RestTemplate

`RestTemplate` 是 Infra 中经典的 REST 客户端。
虽然它处于维护模式，但它仍然被广泛使用且完全受支持。
对于新项目，建议考虑使用 `RestClient`。

[source,java,indent=0,subs="verbatim,quotes"]
----
RestTemplate restTemplate = new RestTemplate();

String result = restTemplate.getForObject("https://example.com", String.class);
----

[[rest-client-interface]]
== HTTP 接口

Infra 6.0 引入了将 HTTP 服务定义为 Java 接口的功能。
然后，您可以生成实现此接口的代理，该代理使用 `RestClient` 或 `WebClient` 执行请求。

[source,java,indent=0,subs="verbatim,quotes"]
----
public interface MyService {
    @GetExchange("/resource")
    String getResource();
}

// ...

MyService service = HttpServiceProxyFactory.builderFor(RestClientAdapter.create(restClient))
    .build()
    .createClient(MyService.class);
----
