description = "Infra application test module"

dependencies {
  api(project(":infra-core"))
  api(project(":infra-app-config"))
  api project(":infra-test")

  optional project(":infra-web-client")
  optional project(":infra-web")
  optional project(':infra-webmvc-mock')
  optional project(":infra-web-reactive")
  optional project(':module:infra-app-web-server')

  optional("org.junit.platform:junit-platform-launcher")
  optional("org.junit.jupiter:junit-jupiter-api")
  optional("org.junit.jupiter:junit-jupiter-params")
  optional("org.assertj:assertj-core")
  optional("junit:junit")

  optional 'org.apache.httpcomponents.core5:httpcore5'
  optional 'org.apache.httpcomponents.core5:httpcore5-reactive'
  optional 'org.apache.httpcomponents.client5:httpclient5'

  optional 'com.google.code.gson:gson'
  optional("tools.jackson.core:jackson-databind")
  optional 'jakarta.json.bind:jakarta.json.bind-api'
  optional 'org.spockframework:spock-core:2.2-M1-groovy-4.0'
  optional("javax.inject:javax.inject")
  optional("io.projectreactor.netty:reactor-netty-http")

  optional("org.aspectj:aspectjweaver")
  optional("org.apache.groovy:groovy")
  optional("org.hamcrest:hamcrest")
  optional 'org.xmlunit:xmlunit-core'
  optional 'org.htmlunit:htmlunit'
  optional 'org.seleniumhq.selenium:selenium-api'
  optional("org.seleniumhq.selenium:htmlunit-driver") {
    exclude group: "commons-logging", module: "commons-logging"
    exclude group: "net.bytebuddy", module: "byte-buddy"
  }
  optional("org.seleniumhq.selenium:selenium-java") {
    exclude group: "net.bytebuddy", module: "byte-buddy"
  }
  optional("org.xmlunit:xmlunit-matchers")
  optional("org.skyscreamer:jsonassert")
  optional("com.jayway.jsonpath:json-path")
  optional("io.projectreactor:reactor-test")
  optional('io.micrometer:context-propagation')
  optional('io.micrometer:micrometer-observation')
  optional 'org.assertj:assertj-core'

  optional 'org.reactivestreams:reactive-streams'
  optional 'io.projectreactor:reactor-core'
  optional("org.mockito:mockito-core")
  optional("org.mockito:mockito-junit-jupiter")


  annotationProcessor(project(":infra-build:infra-configuration-processor"))
  annotationProcessor(project(":infra-build:infra-annotation-config-processor"))

  testImplementation 'org.eclipse:yasson'
  testImplementation project(':infra-test-support')
  testImplementation project(':module:infra-app-webmvc')
  testImplementation project(':module:infra-app-freemarker')
  testImplementation project(':module:infra-app-netty-server')
  testImplementation project(':module:infra-app-web-server')
  testImplementation project(':module:infra-app-reactor-netty')
  testImplementation testFixtures(project(':module:infra-app-netty-server'))

  testImplementation("org.junit.platform:junit-platform-testkit")
  testImplementation("com.thoughtworks.xstream:xstream")

  testRuntimeOnly("org.junit.vintage:junit-vintage-engine") {
    exclude group: "junit", module: "junit"
  }
  testRuntimeOnly("org.junit.support:testng-engine")
  testRuntimeOnly("org.glassfish:jakarta.el")
  testRuntimeOnly("com.sun.xml.bind:jaxb-core")
  testRuntimeOnly("com.sun.xml.bind:jaxb-impl")
  testRuntimeOnly("org.yaml:snakeyaml")
}