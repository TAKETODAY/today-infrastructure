/*
 * This file was generated by the Gradle 'init' task.
 */
//    A Java library for dependency injection and aspect oriented programing
//    and building high-performance web applications like Spring Boot.

plugins {
  id 'java'
  id 'maven-publish'
  id 'org.asciidoctor.jvm.convert' version '3.3.2'
  id 'org.asciidoctor.jvm.pdf' version '3.3.2'
}

group = 'cn.taketoday'
version = '4.0.0-Draft.1'
description = 'TODAY Framework'
sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17

repositories {
  mavenLocal()
  maven {
    url = uri('https://maven.aliyun.com/repository/public')
  }
  maven {
    url = uri('https://maven.aliyun.com/repository/central')
  }
  maven {
    url = uri('https://repo.maven.apache.org/maven2/')
  }
}

dependencies {
  testImplementation 'ch.qos.logback:logback-classic:1.2.6'
  testImplementation 'org.apache.logging.log4j:log4j-core:2.14.1'
  testImplementation 'org.assertj:assertj-core:3.21.0'
  testImplementation 'junit:junit:4.13.2'
  testImplementation 'org.junit.jupiter:junit-jupiter:5.8.1'
  testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
  testImplementation 'org.junit.vintage:junit-vintage-engine:5.8.1'
  testImplementation 'org.codehaus.janino:janino:3.1.6'
  testImplementation 'mysql:mysql-connector-java:8.0.25'
  testImplementation 'org.jdbi:jdbi:2.78'
  testImplementation 'org.jooq:jooq:3.3.0'
  testImplementation 'commons-dbutils:commons-dbutils:1.7'
  testImplementation 'org.teasoft:bee:1.9.5'
  testImplementation 'org.teasoft:honey:1.9.5'
  testImplementation 'org.mockito:mockito-core:3.12.4'
  testImplementation 'org.mockito:mockito-junit-jupiter:3.12.4'
  testImplementation 'com.h2database:h2:1.4.200'
  testImplementation 'com.google.guava:guava:31.0.1-jre'
  testImplementation 'org.hsqldb:hsqldb:2.6.1'
  testImplementation 'org.zapodot:embedded-db-junit:1.0.0'
  testImplementation 'org.sql2o:sql2o:1.6.0'
  testImplementation 'io.projectreactor:reactor-test:3.4.11'
  testImplementation 'org.skyscreamer:jsonassert:1.5.0'
  testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.0'
  testImplementation 'org.xmlunit:xmlunit-assertj:2.8.3'
  testImplementation 'com.squareup.okhttp3:mockwebserver:4.9.2'
  testImplementation 'org.eclipse:yasson:2.0.2'

  compileOnly 'org.projectlombok:lombok:1.18.22'
  compileOnly 'io.netty:netty-codec-http:4.1.69.Final'
  compileOnly 'io.netty:netty-transport-native-kqueue:4.1.69.Final'
  compileOnly 'org.hibernate:hibernate-core-jakarta:5.6.0.Final'
  compileOnly 'joda-time:joda-time:2.10.13'
  compileOnly 'com.google.code.findbugs:jsr305:3.0.2'
  compileOnly 'org.yaml:snakeyaml:1.29'
  compileOnly 'jakarta.servlet:jakarta.servlet-api:5.0.0'
  compileOnly 'jakarta.servlet.jsp.jstl:jakarta.servlet.jsp.jstl-api:2.0.0'
  compileOnly 'jakarta.servlet.jsp:jakarta.servlet.jsp-api:3.0.0'
  compileOnly 'jakarta.json.bind:jakarta.json.bind-api:2.0.0'
  compileOnly 'jakarta.annotation:jakarta.annotation-api:2.0.0'
  compileOnly 'jakarta.inject:jakarta.inject-api:2.0.1'
  compileOnly 'jakarta.websocket:jakarta.websocket-api:2.0.0'
  compileOnly 'com.alibaba:fastjson:1.2.78'
  compileOnly 'com.fasterxml.jackson.core:jackson-core:2.13.0'
  compileOnly 'com.fasterxml.jackson.dataformat:jackson-dataformat-smile:2.13.0'
  compileOnly 'com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:2.13.0'
  compileOnly 'com.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.13.0'
  compileOnly 'com.google.protobuf:protobuf-java-util:3.19.1'
  compileOnly 'com.googlecode.protobuf-java-format:protobuf-java-format:1.4'
  compileOnly 'com.rometools:rome:1.16.0'
  compileOnly 'commons-fileupload:commons-fileupload:1.4'
  compileOnly 'org.apache.tomcat.embed:tomcat-embed-core:10.0.12'
  compileOnly 'org.eclipse.jetty:jetty-webapp:11.0.7'
  compileOnly 'io.undertow:undertow-core:2.2.12.Final'
  compileOnly 'io.undertow:undertow-servlet-jakartaee9:2.2.12.Final'
  compileOnly 'org.freemarker:freemarker:2.3.31'
  compileOnly 'org.redisson:redisson:3.16.4'
  compileOnly 'com.github.ben-manes.caffeine:caffeine:3.0.4'
  compileOnly 'com.jamonapi:jamon:2.82'
  compileOnly 'org.hibernate.validator:hibernate-validator:7.0.1.Final'
  compileOnly 'org.apache.tomcat.embed:tomcat-embed-websocket:10.0.12'
  compileOnly 'io.undertow:undertow-websockets-jsr-jakartaee9:2.2.12.Final'
  compileOnly 'org.eclipse.jetty.websocket:websocket-jetty-server:11.0.7'
  compileOnly 'io.projectreactor:reactor-core:3.4.11'
  compileOnly 'io.projectreactor.tools:blockhound:1.0.6.RELEASE'
  compileOnly 'io.reactivex.rxjava3:rxjava:3.1.2'
  compileOnly 'io.smallrye.reactive:mutiny:1.1.2'
  compileOnly 'com.squareup.okhttp3:okhttp:4.9.2'
  compileOnly 'org.apache.httpcomponents:httpclient:4.5.13'
  compileOnly 'org.apache.httpcomponents.core5:httpcore5:5.1.2'
  compileOnly 'org.apache.httpcomponents.core5:httpcore5-reactive:5.1.2'
  compileOnly 'org.apache.httpcomponents.client5:httpclient5:5.1.1'
  compileOnly 'org.eclipse.jetty:jetty-http:11.0.7'
  compileOnly 'org.eclipse.jetty:jetty-client:11.0.7'
  compileOnly 'io.projectreactor.netty:reactor-netty-http:1.0.12'
  compileOnly 'org.eclipse.jetty:jetty-reactive-httpclient:3.0.4'
  compileOnly 'org.mybatis:mybatis:3.5.7'
  compileOnly 'com.zaxxer:HikariCP:5.0.0'
  compileOnly 'net.sf.jopt-simple:jopt-simple:5.0.4'
  compileOnly 'jakarta.mail:jakarta.mail-api:2.0.1'
  compileOnly 'org.slf4j:slf4j-api:1.7.32'
  compileOnly 'org.apache.logging.log4j:log4j-api:2.14.1'
  compileOnly 'org.openjdk.jmh:jmh-core:1.33'
  compileOnly 'org.openjdk.jmh:jmh-generator-annprocess:1.33'

  annotationProcessor('org.projectlombok:lombok:1.18.22')
}

// latest  4.0.0-Beta.1 -Alpha.1 -Draft.1 -SNAPSHOT

publishing {
  publications {
    maven(MavenPublication) {
      from(components.java)
    }
  }
}


ext {
  javadocLinks = [
          "https://docs.oracle.com/en/java/javase/17/docs/api/",
          "https://jakarta.ee/specifications/platform/9/apidocs/",
          "https://docs.oracle.com/cd/E13222_01/wls/docs90/javadocs/",  // CommonJ
          "https://www.ibm.com/docs/api/v1/content/SSEQTP_8.5.5/com.ibm.websphere.javadoc.doc/web/apidocs/",
          "https://docs.jboss.org/jbossas/javadoc/4.0.5/connector/",
          "https://docs.jboss.org/jbossas/javadoc/7.1.2.Final/",
          "https://www.eclipse.org/aspectj/doc/released/aspectj5rt-api/",
          "https://www.quartz-scheduler.org/api/2.3.0/",
          "https://fasterxml.github.io/jackson-core/javadoc/2.10/",
          "https://fasterxml.github.io/jackson-databind/javadoc/2.10/",
          "https://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.10/",
          "https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/",
          "https://projectreactor.io/docs/test/release/api/",
          "https://junit.org/junit4/javadoc/4.13.2/",
  ] as String[]
}


tasks.withType(JavaCompile) {
  options.encoding = 'UTF-8'
}

jar {
//  from {
    //添加依懒到打包文件
    //configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
//    configurations.runtime.collect { zipTree(it) }
//  }
//  manifest {
//    attributes 'Main-Class': appMainClass
//  }
}

task clearJar(type: Delete) {
  delete 'build/libs/lib'
}

task copyJar(type: Copy) {
  into('build/libs/lib')
}

task release(type: Copy, dependsOn: [build, clearJar, copyJar])

apply from: "${rootDir}/gradle/docs.gradle"

