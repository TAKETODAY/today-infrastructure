plugins {
  id 'base'
  id 'jacoco-report-aggregation'
}

description = "Code Coverage"

dependencies {
  jacocoAggregation(enforcedPlatform(project(":infra-dependencies")))

  jacocoAggregation project(':infra-app')

  jacocoAggregation project(':infra-core')
  jacocoAggregation project(':infra-beans')
  jacocoAggregation project(':infra-aop')
  jacocoAggregation project(':infra-context')
  jacocoAggregation project(':infra-aspects')
  jacocoAggregation project(':infra-context-indexer')
  jacocoAggregation project(':infra-context-support')
  jacocoAggregation project(':infra-core-aot')
  jacocoAggregation project(':infra-core-test')
  jacocoAggregation project(':infra-jcache')
  jacocoAggregation project(':infra-jdbc')
  jacocoAggregation project(':infra-oxm')
  jacocoAggregation project(':infra-test')
  jacocoAggregation project(':infra-test-support')
  jacocoAggregation project(':infra-tx')
  jacocoAggregation project(':infra-web')
  jacocoAggregation project(':infra-webmvc')
  jacocoAggregation project(':infra-websocket')
  jacocoAggregation project(':integration-tests')

  jacocoAggregation project(':module:infra-app-freemarker')
  jacocoAggregation project(':module:infra-app-gson')
  jacocoAggregation project(':module:infra-app-netty-server')
  jacocoAggregation project(':module:infra-app-reactor-netty')
  jacocoAggregation project(':module:infra-app-web-server')
  jacocoAggregation project(':module:infra-app-webmvc')
  jacocoAggregation project(':module:infra-app-websocket')
  jacocoAggregation project(':module:infra-app-http-client')
  jacocoAggregation project(':module:infra-app-http-codec')
  jacocoAggregation project(':module:infra-app-http-converter')
  jacocoAggregation project(':module:infra-app-restclient')
  jacocoAggregation project(':module:infra-app-jackson')
  jacocoAggregation project(':module:infra-app-jsonb')



//  jacocoAggregation project(':infra-build:infra-app-loader')
//  jacocoAggregation project(':infra-build:infra-app-loader-tools')
//  jacocoAggregation project(':infra-build:infra-jarmode-layertools')
//  jacocoAggregation project(':infra-build:infra-maven-plugin')
//  jacocoAggregation project(':infra-build:infra-gradle-plugin')
//  jacocoAggregation project(':infra-build:infra-configuration-processor')
//  jacocoAggregation project(':infra-build:infra-annotation-config-processor')
}

reporting {
  reports {
    testCodeCoverageReport(JacocoCoverageReport) {
      testSuiteName = "test"
    }
  }
}

testCodeCoverageReport.dependsOn(check)
